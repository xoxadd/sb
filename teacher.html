<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Teacher Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Segoe UI", sans-serif;
}

body {
  min-height: 100vh;
  background: linear-gradient(135deg, #efe9ff, #d9ccff);
}

.container {
  display: flex;
  min-height: 100vh;
  padding: 20px;
}

.sidebar {
  width: 230px;
  background: white;
  border-radius: 20px;
  padding: 25px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.08);
}

.sidebar h2 {
  color: #6c4dff;
  margin-bottom: 30px;
}

.sidebar ul {
  list-style: none;
}

.sidebar li {
  padding: 12px;
  margin-bottom: 10px;
  border-radius: 12px;
  cursor: pointer;
  color: #555;
  transition: 0.3s;
}

.sidebar li.active,
.sidebar li:hover {
  background: #ede7ff;
  color: #6c4dff;
  font-weight: 600;
}

.main {
  flex: 1;
  padding: 25px;
}

.section {
  display: none;
}

.section.active {
  display: block;
}

.header {
  background: white;
  color: #6c4dff;
  padding: 18px;
  border-radius: 18px;
  margin-bottom: 25px;
  font-size: 18px;
  font-weight: 600;
  box-shadow: 0 10px 25px rgba(0,0,0,0.08);
}

input {
  padding: 12px;
  width: 260px;
  border-radius: 14px;
  border: 1px solid #ddd;
  outline: none;
}

button {
  padding: 12px 22px;
  border: none;
  border-radius: 14px;
  background: #9f8cff;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: 0.3s;
}

button:hover {
  background: #7f6bff;
}

table {
  width: 100%;
  margin-top: 25px;
  border-collapse: collapse;
  background: white;
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 12px 30px rgba(0,0,0,0.08);
}

th, td {
  padding: 14px;
  border-bottom: 1px solid #eee;
  text-align: center;
}

th {
  background: #9f8cff;
  color: white;
}

.cards {
  display: grid;
  grid-template-columns: repeat(2,1fr);
  gap: 20px;
}

.card {
  background: white;
  padding: 25px;
  border-radius: 20px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.08);
  text-align: center;
}

.card h1 {
  color: #6c4dff;
}

.logout {
  background: #ff7676;
}
.logout:hover {
  background: #e35d5d;
}
</style>
</head>

<body>

<div class="container">

  <div class="sidebar">
    <h2>Teacher Panel</h2>
    <ul>
      <li class="active" onclick="showSection('dashboard', this)">Dashboard</li>
      <li onclick="showSection('students', this)">Students</li>
      <li onclick="showSection('reports', this)">Reports</li>
      <li onclick="showSection('settings', this)">Settings</li>
    </ul>
  </div>

  <div class="main">

    <div id="dashboard" class="section active">
      <div class="header">Dashboard Overview</div>

      <div class="cards">
        <div class="card">
          <h1 id="totalStudents">0</h1>
          <p>Total Students</p>
        </div>
        <div class="card">
          <h1 id="activeDisplay">0</h1>
          <p>Active Students</p>
        </div>
      </div>

      <canvas id="chart" style="margin-top:35px;"></canvas>
    </div>

    <div id="students" class="section">
      <div class="header">Student Management</div>

      <input type="text" id="lrnInput" placeholder="Enter Student LRN">
      <button onclick="addStudent()">Add Student</button>

      <table>
        <thead>
          <tr>
  <th>#</th>
  <th>LRN</th>
  <th>Status</th>
  <th>Action</th>
</tr>
        </thead>
        <tbody id="studentTable"></tbody>
      </table>
    </div>

    <div id="reports" class="section">
      <div class="header">Reports</div>
      <p>ðŸ“Š Student summary report</p>
    </div>

    <div id="settings" class="section">
      <div class="header">Settings</div>
      <button class="logout" onclick="location.href='index.html'">Log Out</button>
    </div>

  </div>
</div>

<script>
let count = 0;
let activeCount = 0;
let inactiveCount = 0;

function showSection(id, el) {
  document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");

  document.querySelectorAll(".sidebar li").forEach(li => li.classList.remove("active"));
  el.classList.add("active");
}

function addStudent() {
  const lrn = document.getElementById("lrnInput").value.trim();
  if (!lrn) return alert("Enter LRN");

  count++;
  activeCount++;

  document.getElementById("totalStudents").innerText = count;
  document.getElementById("activeDisplay").innerText = activeCount;

  const table = document.getElementById("studentTable");
  const row = table.insertRow();

  row.innerHTML = `
    <td>${count}</td>
    <td>${lrn}</td>
    <td onclick="toggleStatus(this)" style="color:#6c4dff;font-weight:bold;cursor:pointer;">Active</td>
    <td><button onclick="removeStudent(this)" style="background:#ff7676;">Remove</button></td>
  `;

  document.getElementById("lrnInput").value = "";

  updateChart();
}

function toggleStatus(cell) {
  if (cell.innerText === "Active") {
    cell.innerText = "Inactive";
    cell.style.color = "#ff7676";
    activeCount--;
    inactiveCount++;
  } else {
    cell.innerText = "Active";
    cell.style.color = "#6c4dff";
    activeCount++;
    inactiveCount--;
  }

  document.getElementById("activeDisplay").innerText = activeCount;
  updateChart();
}
function removeStudent(button) {
  const row = button.closest("tr");
  const statusCell = row.cells[2];

  if (statusCell.innerText === "Active") {
    activeCount--;
  } else {
    inactiveCount--;
  }

  count--;

  row.remove();
  refreshNumbers(); // ðŸ‘ˆ add this line

  document.getElementById("totalStudents").innerText = count;
  document.getElementById("activeDisplay").innerText = activeCount;

  updateChart();
}


const ctx = document.getElementById("chart");

const studentChart = new Chart(ctx, {
  type: "bar",
  data: {
    labels: ["Active", "Inactive"],
    datasets: [{
      label: "Student Status",
      data: [activeCount, inactiveCount],
      backgroundColor: ["#6c4dff", "#ff7676"]
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { display: false }
    }
  }
});

function updateChart() {
  studentChart.data.datasets[0].data = [activeCount, inactiveCount];
  studentChart.update();
}
</script>

</body>
</html>
